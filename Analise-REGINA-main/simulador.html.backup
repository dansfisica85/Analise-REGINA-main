<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Super BI - Sistema REGINA 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card { transition: all 0.3s ease; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white">
        <div class="container mx-auto px-6 py-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold mb-2">üéØ Simulador Super BI Avan√ßado</h1>
                    <p class="text-lg opacity-90">Simule cen√°rios e projete resultados baseados no Super BI 2025</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold">2025</div>
                    <p class="text-sm opacity-75">Sistema REGINA</p>
                </div>
            </div>
            <div class="mt-4">
                <a href="index.html" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-colors">
                    ‚Üê Voltar ao Sistema
                </a>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Sele√ß√£o de Escola -->
        <section class="mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md card">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üè´ Selecionar Escola para Simula√ß√£o</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <select id="escolaSelect" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">Selecione uma escola...</option>
                    </select>
                    <button onclick="carregarEscola()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        Carregar Dados da Escola
                    </button>
                </div>
            </div>
        </section>

        <!-- Controles do Simulador -->
        <section class="mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md card">
                <h2 class="text-xl font-semibold text-gray-800 mb-6">‚öôÔ∏è Controles de Simula√ß√£o</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Frequ√™ncia -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            üìä Frequ√™ncia dos Alunos (%)
                        </label>
                        <input type="range" id="frequenciaSlider" min="70" max="100" value="85" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>70%</span>
                            <span id="frequenciaValue" class="font-medium text-blue-600">85%</span>
                            <span>100%</span>
                        </div>
                    </div>

                    <!-- Rendimento -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            üìö Rendimento Acad√™mico
                        </label>
                        <input type="range" id="rendimentoSlider" min="5.0" max="10.0" step="0.1" value="7.5" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>5.0</span>
                            <span id="rendimentoValue" class="font-medium text-green-600">7.5</span>
                            <span>10.0</span>
                        </div>
                    </div>

                    <!-- Aprova√ß√£o -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            ‚úÖ Taxa de Aprova√ß√£o (%)
                        </label>
                        <input type="range" id="aprovacaoSlider" min="70" max="100" value="85" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>70%</span>
                            <span id="aprovacaoValue" class="font-medium text-purple-600">85%</span>
                            <span>100%</span>
                        </div>
                    </div>

                    <!-- Plataformas -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            üíª Uso de Plataformas (%)
                        </label>
                        <input type="range" id="plataformasSlider" min="50" max="100" value="75" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>50%</span>
                            <span id="plataformasValue" class="font-medium text-orange-600">75%</span>
                            <span>100%</span>
                        </div>
                    </div>

                    <!-- Engajamento -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            üë• Engajamento Docente
                        </label>
                        <input type="range" id="engajamentoSlider" min="1.0" max="5.0" step="0.1" value="3.5" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>1.0</span>
                            <span id="engajamentoValue" class="font-medium text-indigo-600">3.5</span>
                            <span>5.0</span>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="flex flex-col space-y-2">
                        <button onclick="resetarValores()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                            üîÑ Resetar
                        </button>
                        <button onclick="aplicarCenarioOtimista()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                            üìà Cen√°rio Otimista
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resultados da Simula√ß√£o -->
        <section class="mb-8">
            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Score Super BI -->
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">üéØ Score Super BI Projetado</h3>
                    <div class="text-center">
                        <div id="scoreProjetado" class="text-6xl font-bold text-blue-600 mb-4">82.5</div>
                        <div id="classificacaoProjetada" class="inline-block px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-lg font-medium mb-4">
                            BOM
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">Melhoria:</span>
                                <span id="melhoriaScore" class="font-medium text-green-600">+0.0</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Meta 90:</span>
                                <span id="distanciaMeta" class="font-medium text-orange-600">-7.5</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Radar Chart -->
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">üìä Radar de Componentes</h3>
                    <canvas id="radarSimulacao" width="400" height="300"></canvas>
                </div>
            </div>
        </section>

        <!-- Gr√°ficos de An√°lise -->
        <section class="mb-8">
            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Contribui√ß√£o por Componente -->
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">üìà Contribui√ß√£o por Componente</h3>
                    <canvas id="graficoContribuicao" width="400" height="300"></canvas>
                </div>

                <!-- Cen√°rios de Melhoria -->
                <div class="bg-white p-6 rounded-lg shadow-md card">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">üöÄ Cen√°rios de Melhoria</h3>
                    <canvas id="graficoCenarios" width="400" height="300"></canvas>
                </div>
            </div>
        </section>

        <!-- Cen√°rios Pr√©-definidos -->
        <section class="mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md card">
                <h2 class="text-xl font-semibold text-gray-800 mb-6">üìã Cen√°rios Pr√©-definidos</h2>
                <div class="grid md:grid-cols-3 gap-4">
                    <button onclick="aplicarCenario('conservador')" class="p-4 border-2 border-yellow-300 rounded-lg hover:bg-yellow-50">
                        <h4 class="font-medium text-yellow-800 mb-2">üü° Conservador</h4>
                        <p class="text-sm text-yellow-600">Melhorias graduais e sustent√°veis</p>
                    </button>
                    <button onclick="aplicarCenario('equilibrado')" class="p-4 border-2 border-blue-300 rounded-lg hover:bg-blue-50">
                        <h4 class="font-medium text-blue-800 mb-2">üîµ Equilibrado</h4>
                        <p class="text-sm text-blue-600">Crescimento moderado em todas as √°reas</p>
                    </button>
                    <button onclick="aplicarCenario('agressivo')" class="p-4 border-2 border-green-300 rounded-lg hover:bg-green-50">
                        <h4 class="font-medium text-green-800 mb-2">üü¢ Agressivo</h4>
                        <p class="text-sm text-green-600">Metas ambiciosas de excel√™ncia</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Recomenda√ß√µes -->
        <section class="mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md card">
                <h2 class="text-xl font-semibold text-gray-800 mb-6">üí° Recomenda√ß√µes Baseadas na Simula√ß√£o</h2>
                <div id="recomendacoes" class="space-y-3">
                    <div class="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400">
                        <p class="text-sm text-blue-700">‚Ä¢ Configure os par√¢metros acima para ver recomenda√ß√µes personalizadas</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Dados da simula√ß√£o
        let dadosSimulacao = {
            frequencia: 85,
            rendimento: 7.5,
            aprovacao: 85,
            plataformas: 75,
            engajamento: 3.5,
            scoreInicial: 82.5
        };

        // Pesos do Super BI
        const pesos = {
            frequencia: 0.25,
            rendimento: 0.25,
            aprovacao: 0.25,
            plataformas: 0.15,
            engajamento: 0.10
        };

        // Lista de escolas (simplificada)
        const escolas = [
            { id: 'pei_edith_silveira', nome: 'PEI EE Prof¬™ Edith Silveira Dalmaso', tipo: 'PEI' },
            { id: 'ee_plinio_berardo', nome: 'EE Prof¬∫ Pl√≠nio Berardo', tipo: 'Regular' },
            { id: 'ee_mauricio_montecchi', nome: 'EE Mauricio Montecchi', tipo: 'Regular' },
            { id: 'pei_jose_luiz', nome: 'PEI EE Jos√© Luiz de Siqueira', tipo: 'PEI' },
            { id: 'pei_winston_churchill', nome: 'PEI EE Winston Churchill', tipo: 'PEI' }
        ];

        // Inicializar p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar escolas no select
            const escolaSelect = document.getElementById('escolaSelect');
            escolas.forEach(escola => {
                const option = document.createElement('option');
                option.value = escola.id;
                option.textContent = escola.nome;
                escolaSelect.appendChild(option);
            });

            // Inicializar gr√°ficos
            inicializarGraficos();

            // Configurar event listeners
            configurarEventListeners();

            // Atualizar valores iniciais
            atualizarSimulacao();
        });

        function configurarEventListeners() {
            const sliders = ['frequencia', 'rendimento', 'aprovacao', 'plataformas', 'engajamento'];
            sliders.forEach(slider => {
                document.getElementById(slider + 'Slider').addEventListener('input', atualizarSimulacao);
            });
        }

        function atualizarSimulacao() {
            // Obter valores dos sliders
            dadosSimulacao.frequencia = parseFloat(document.getElementById('frequenciaSlider').value);
            dadosSimulacao.rendimento = parseFloat(document.getElementById('rendimentoSlider').value);
            dadosSimulacao.aprovacao = parseFloat(document.getElementById('aprovacaoSlider').value);
            dadosSimulacao.plataformas = parseFloat(document.getElementById('plataformasSlider').value);
            dadosSimulacao.engajamento = parseFloat(document.getElementById('engajamentoSlider').value);

            // Atualizar displays dos valores
            document.getElementById('frequenciaValue').textContent = dadosSimulacao.frequencia.toFixed(0) + '%';
            document.getElementById('rendimentoValue').textContent = dadosSimulacao.rendimento.toFixed(1);
            document.getElementById('aprovacaoValue').textContent = dadosSimulacao.aprovacao.toFixed(0) + '%';
            document.getElementById('plataformasValue').textContent = dadosSimulacao.plataformas.toFixed(0) + '%';
            document.getElementById('engajamentoValue').textContent = dadosSimulacao.engajamento.toFixed(1);

            // Calcular novo score
            const novoScore = calcularScore();
            const melhoria = novoScore - dadosSimulacao.scoreInicial;

            // Atualizar displays do score
            document.getElementById('scoreProjetado').textContent = novoScore.toFixed(1);
            document.getElementById('melhoriaScore').textContent = (melhoria >= 0 ? '+' : '') + melhoria.toFixed(1);
            document.getElementById('distanciaMeta').textContent = (90 - novoScore).toFixed(1);

            // Atualizar classifica√ß√£o
            atualizarClassificacao(novoScore);

            // Atualizar gr√°ficos
            atualizarGraficos();

            // Gerar recomenda√ß√µes
            gerarRecomendacoes(novoScore);
        }

        function calcularScore() {
            return (dadosSimulacao.frequencia * pesos.frequencia) +
                   (dadosSimulacao.rendimento * 10 * pesos.rendimento) +
                   (dadosSimulacao.aprovacao * pesos.aprovacao) +
                   (dadosSimulacao.plataformas * pesos.plataformas) +
                   (dadosSimulacao.engajamento * 20 * pesos.engajamento);
        }

        function atualizarClassificacao(score) {
            let classificacao = 'INADEQUADO';
            let corClasse = 'bg-red-100 text-red-800';

            if (score >= 85) {
                classificacao = 'MUITO BOM';
                corClasse = 'bg-green-100 text-green-800';
            } else if (score >= 75) {
                classificacao = 'BOM';
                corClasse = 'bg-blue-100 text-blue-800';
            } else if (score >= 65) {
                classificacao = 'REGULAR';
                corClasse = 'bg-yellow-100 text-yellow-800';
            } else if (score >= 55) {
                classificacao = 'ALERTA';
                corClasse = 'bg-orange-100 text-orange-800';
            }

            const elemento = document.getElementById('classificacaoProjetada');
            elemento.textContent = classificacao;
            elemento.className = 'inline-block px-4 py-2 rounded-full text-lg font-medium ' + corClasse;
        }

        function aplicarCenario(tipo) {
            switch(tipo) {
                case 'conservador':
                    document.getElementById('frequenciaSlider').value = 88;
                    document.getElementById('rendimentoSlider').value = 7.8;
                    document.getElementById('aprovacaoSlider').value = 87;
                    document.getElementById('plataformasSlider').value = 80;
                    document.getElementById('engajamentoSlider').value = 3.8;
                    break;
                case 'equilibrado':
                    document.getElementById('frequenciaSlider').value = 92;
                    document.getElementById('rendimentoSlider').value = 8.2;
                    document.getElementById('aprovacaoSlider').value = 90;
                    document.getElementById('plataformasSlider').value = 85;
                    document.getElementById('engajamentoSlider').value = 4.2;
                    break;
                case 'agressivo':
                    document.getElementById('frequenciaSlider').value = 96;
                    document.getElementById('rendimentoSlider').value = 8.8;
                    document.getElementById('aprovacaoSlider').value = 95;
                    document.getElementById('plataformasSlider').value = 92;
                    document.getElementById('engajamentoSlider').value = 4.6;
                    break;
            }
            atualizarSimulacao();
        }

        function resetarValores() {
            document.getElementById('frequenciaSlider').value = 85;
            document.getElementById('rendimentoSlider').value = 7.5;
            document.getElementById('aprovacaoSlider').value = 85;
            document.getElementById('plataformasSlider').value = 75;
            document.getElementById('engajamentoSlider').value = 3.5;
            atualizarSimulacao();
        }

        function aplicarCenarioOtimista() {
            aplicarCenario('agressivo');
        }

        // Vari√°veis dos gr√°ficos
        let radarChart, contribuicaoChart, cenariosChart;

        function inicializarGraficos() {
            // Radar Chart
            const ctxRadar = document.getElementById('radarSimulacao').getContext('2d');
            radarChart = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['Frequ√™ncia', 'Rendimento', 'Aprova√ß√£o', 'Plataformas', 'Engajamento'],
                    datasets: [{
                        label: 'Atual',
                        data: [85, 75, 85, 75, 70],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        pointBackgroundColor: 'rgb(59, 130, 246)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    }
                }
            });

            // Gr√°fico de Contribui√ß√£o
            const ctxContrib = document.getElementById('graficoContribuicao').getContext('2d');
            contribuicaoChart = new Chart(ctxContrib, {
                type: 'doughnut',
                data: {
                    labels: ['Frequ√™ncia (25%)', 'Rendimento (25%)', 'Aprova√ß√£o (25%)', 'Plataformas (15%)', 'Engajamento (10%)'],
                    datasets: [{
                        data: [25, 25, 25, 15, 10],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(236, 72, 153, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });

            // Gr√°fico de Cen√°rios
            const ctxCenarios = document.getElementById('graficoCenarios').getContext('2d');
            cenariosChart = new Chart(ctxCenarios, {
                type: 'bar',
                data: {
                    labels: ['Atual', 'Conservador', 'Equilibrado', 'Agressivo'],
                    datasets: [{
                        label: 'Score Super BI',
                        data: [82.5, 85.2, 88.1, 92.3],
                        backgroundColor: [
                            'rgba(107, 114, 128, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });
        }

        function atualizarGraficos() {
            // Atualizar radar
            radarChart.data.datasets[0].data = [
                dadosSimulacao.frequencia,
                dadosSimulacao.rendimento * 10,
                dadosSimulacao.aprovacao,
                dadosSimulacao.plataformas,
                dadosSimulacao.engajamento * 20
            ];
            radarChart.update();

            // Atualizar cen√°rios
            cenariosChart.data.datasets[0].data[0] = calcularScore();
            cenariosChart.update();
        }

        function gerarRecomendacoes(score) {
            const container = document.getElementById('recomendacoes');
            let recomendacoes = [];

            if (dadosSimulacao.frequencia < 90) {
                recomendacoes.push({
                    tipo: 'warning',
                    texto: 'Frequ√™ncia abaixo de 90%. Implemente a√ß√µes para reduzir absente√≠smo.'
                });
            }

            if (dadosSimulacao.rendimento < 8.0) {
                recomendacoes.push({
                    tipo: 'info',
                    texto: 'Rendimento pode melhorar. Considere refor√ßo escolar e metodologias ativas.'
                });
            }

            if (dadosSimulacao.plataformas < 80) {
                recomendacoes.push({
                    tipo: 'primary',
                    texto: 'Intensifique o uso das plataformas BI. Ofere√ßa capacita√ß√£o aos professores.'
                });
            }

            if (score >= 90) {
                recomendacoes.push({
                    tipo: 'success',
                    texto: 'Excelente! Mantenha as pr√°ticas atuais e compartilhe as boas pr√°ticas.'
                });
            }

            // Renderizar recomenda√ß√µes
            container.innerHTML = '';
            recomendacoes.forEach(rec => {
                const cores = {
                    warning: 'bg-yellow-50 border-yellow-400 text-yellow-700',
                    info: 'bg-blue-50 border-blue-400 text-blue-700',
                    primary: 'bg-purple-50 border-purple-400 text-purple-700',
                    success: 'bg-green-50 border-green-400 text-green-700'
                };

                const div = document.createElement('div');
                div.className = `p-3 rounded-lg border-l-4 ${cores[rec.tipo]}`;
                div.innerHTML = `<p class="text-sm">‚Ä¢ ${rec.texto}</p>`;
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>